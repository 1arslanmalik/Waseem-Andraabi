---
import {
  FaEnvelope,
  FaMapMarkerAlt,
  FaPaperPlane,
  FaInstagram,
  FaTwitter,
  FaPhone,
  FaClock,
} from "react-icons/fa";
import { IoMdHome } from "react-icons/io";
import { RiSignalWifiErrorFill } from "react-icons/ri";
import MainLayout from "../layouts/MainLayout.astro";
---

<MainLayout>
  <section class="bg-primary_light py-8 lg:py-16 px-4">
    <div class="container mx-auto max-w-6xl bg-primary p-4 lg:p-5 rounded-lg">
      <div
        class="flex flex-col lg:flex-row gap-8 lg:gap-16 justify-center items-center"
      >
        <!-- Left Column: Doctor's Information -->
        <div class="w-full lg:w-1/2">
          <div
           class="flex flex-col sm:flex-row items-center sm:items-start mb-6 lg:mb-8"       
			>
            <div class="w-full sm:w-1/3 mb-4 sm:mb-0">
              <!-- Placeholder for doctor's photo -->
              <div class="bg-gray-300 w-32 h-32 rounded-full mx-auto sm:mx-0">
              </div>
            </div>
            <div class="w-full sm:w-2/3 text-center sm:text-left">
              <h1 class="text-2xl sm:text-4xl font-pacifico underline text-white">
                Dr. Waseem Andraabi
              </h1>
              <p class="font-averia_sans m-0 p-0">
                IVF Specialist
              </p>
              <p class="font-averia_sans m-0 p-0">
                Qualification here
              </p>
              <p class="font-averia_sans m-0 p-0">
                <!-- Fellowship- Reproductive Endocrinology & Infertility (IFS-SGRH) -->
              </p>
              <!-- <p class="text-gray-600">DMC/R-04903</p> -->
            </div>
          </div>
          <div class="mb-8 space-y-2 flex flex-col items-start">
            <div class="flex items-center justify-center sm:justify-start">
              <FaMapMarkerAlt className="text-gray-600 mr-2 flex-shrink-0" />
              <p class="text-gray-600 p-0 m-0">
                Address Here
              </p>
            </div>
            <div class="flex items-center justify-center sm:justify-start">
              <FaPhone className="text-gray-600 mr-2 flex-shrink-0" />
              <p class="text-gray-600 p-0 m-0">+91 9044584527</p>
            </div>
            <div class="flex items-center justify-center sm:justify-start">
              <FaEnvelope className="text-gray-600 mr-2 flex-shrink-0" />
              <p class="text-gray-600 p-0 m-0">andrabiofficial@gmail.com</p>
            </div>
            <!-- <div class="flex items-center justify-center sm:justify-start">
              <FaClock className="text-gray-600 mr-2 flex-shrink-0" />
              <p class="text-gray-600 text-center sm:text-left p-0 m-0">
                MON - SAT<br />09:00 AM - 11:00 AM<br />05:00 PM - 07:00 PM
              </p>
            </div> -->
          </div>
        </div>

        <div class="w-full lg:w-1/2 mb-5">

          <!-- Contact Form -->
          <form id="contact-form" class="bg-cream rounded-lg p-4 lg:p-6">
            <div class="mb-4">
              <input
                type="text"
                id="name"
                name="name"
                placeholder="Your Name*"
                required
                class="w-full bg-white rounded py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            <div class="mb-4">
              <input
                type="email"
                id="email"
                name="email"
                placeholder="Your Email*"
                required
                class="w-full bg-white rounded py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            <div class="mb-4">
              <input
                type="tel"
                id="phone"
                name="phone"
                placeholder="Phone Number*"
                required
                class="w-full bg-white rounded py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            <div class="mb-4">
              <textarea
                id="message"
                name="message"
                placeholder="Please Tell Us Your Concerns *"
                required
                rows="4"
                class="w-full bg-white rounded py-2 px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              ></textarea>
            </div>
            <button
              type="submit"
              class="w-full bg-blue-500 text-white font-bold py-2 px-4 rounded"
            >
              Send
            </button>
          </form>
        </div>
      </div>
      <div class="bg-gray-300 w-full h-64 mb-8 rounded-lg"></div>
    </div>
  </section>
</MainLayout>
<script>
  const form = document.getElementById("contact-form");
  const submitButton = form.querySelector('button[type="submit"]');

  async function postEmail(event) {
    event.preventDefault();
    submitButton.disabled = true;
    submitButton.innerHTML = `<svg class="animate-spin mr-2 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg> Sending...`;

    const formData = new FormData(event.target);

    try {
      const response = await fetch("/api/sendEmail.json", {
        method: "POST",
        body: formData,
      });

      const data = await response.json();
      console.log(data);

      if (response.ok) {
        form.innerHTML = `
          <div class="bg-blacklite bg-opacity-70 rounded-xl p-8 shadow-2xl text-center">
            <svg class="text-5xl text-lilac mb-4 mx-auto" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
              <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
            </svg>
            <h2 class="text-2xl font-bold text-lilac mb-4">Thank You!</h2>
            <p class="text-platinum">Your message has been sent successfully. We'll get back to you soon.</p>
          </div>
        `;
      } else {
        throw new Error(data.message || "Server error");
      }
    } catch (error) {
      console.error("Error submitting form:", error);
      submitButton.disabled = false;
      submitButton.innerHTML = `<svg class="mr-2 h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"></path>
      </svg> Send Message`;
      alert(`Error sending message: ${error.message}`);
    }
  }

  form.addEventListener("submit", postEmail);
</script>
